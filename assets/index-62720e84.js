import{a as E,s as g,r as v,b as h,c as C,n as L,N as T}from"./pagination-markup-eb1fa432.js";document.addEventListener("DOMContentLoaded",function(){document.getElementById("logo-link").addEventListener("click",function(){window.location.href="./index.html"}),document.getElementById("subscription-form").addEventListener("submit",function(e){e.preventDefault();const t=document.getElementById("email-input"),r=t.value;if(console.log(r),!t.checkValidity()){alert("https://your-energy.b.goit.study/api/subscription");return}fetch("https://your-energy.b.goit.study/api/subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r})}).then(n=>n.json()).then(n=>{if(console.log(n.message),n.message==="Service not found")throw Error("Request error. Please try again later.");alert("You have successfully subscribed to receive new exercises!"),t.value=""}).catch(n=>{alert(n)})})});let P=document.querySelector(".top-button");window.onscroll=function(){Q()};function Q(){document.body.scrollTop>200||document.documentElement.scrollTop>200?P.style.display="block":P.style.display="none"}P.addEventListener("click",Z);function Z(){window.scrollTo({top:0,behavior:"smooth"})}async function F(e,t=1){let{filter:r="",category:n="",keyword:i=""}=e;switch(r){case"Body parts":r="bodypart";break;case"Muscles":r="muscles";break;case"Equipment":r="equipment";break}const m=new URLSearchParams({[r]:n,keyword:i,page:t,limit:window.innerWidth<768?8:10});return(await E.get("/exercises",{params:m})).data}function N(e){return e.map(t=>{const{rating:r,name:n,burnedCalories:i,time:m,bodyPart:S,target:q,_id:M}=t;return`
      <li class="item">
        <div class="item-header">
          <span class='item-workout'>Workout</span>
          <p class='item-rating js-rating'>${Number.isInteger(r)?`${r}.0`:r}</p>
          <svg class="rating-star" width="18" height="18">
            <use href="${g}#icon-exercises-content-gold-star"></use>
          </svg>
        </div>

        <div class="item-body">
          <svg class="" width="24" height="24">
            <use href="${g}#icon-running-man"></use>
          </svg>
          <h3 class="item-title js-item-title">${n}</h3>
        </div>

        <div class='item-footer'>
          <p>Burned calories: <span>${i} / ${m} min</span></p>
          <p>Body part: <span class="capitalize">${S}</span></p>
          <p>Target: <span class="capitalize">${q}</span></p>
        </div>

        <button class='item-button' data-id=${M} data-modal-open>Start
          <svg class="start-icon" width="16" height="16">
            <use href="${g}#icon-scroll-arrow"></use>
          </svg>
        </button>
      </li>
    `}).join("")}async function I(e,t){const n=new URLSearchParams({filter:e,page:t,limit:window.innerWidth<768?9:12});return await E.get("/filters",{params:n}).then(i=>i.data)}function ee(e){return e.map(({filter:t,name:r,imgURL:n})=>`
        <li class = "new-exercises-item">  
          <div class = "exercises-filter-IMG js-category-item js-item" style="
          background: linear-gradient(0deg, rgba(17, 17, 17, 0.50) 0%, rgba(17, 17, 17, 0.50) 100%), url('${n}'), lightgray -19.24px -11px / 112.354% 111.111% no-repeat; background-size: contain; background-size: cover;" data-category="${r}">
            <div class="container-for-h2-and-p-card">
              <h3 class="exercises-title-of-item js-item">${r}</h3>
              <p class="exercises-text-of-item js-item">${t}</p>
            </div>              
          </div>            
        </li>`).join("")}const z=`
  <div class="loader">
    <svg class="" width="24" height="24">
      <use href="${g}#icon-aside-barbell"></use>
    </svg>
  </div>
`,s={list:document.querySelector(".exercises-filter-list"),newList:document.querySelector(".list-for-new-exercises"),bodyPartsItem:document.querySelector(".filter-of-body-parts"),musclesItem:document.querySelector(".filter-of-muscles"),equipmentItem:document.querySelector(".filter-of-equipment"),pagination:document.querySelector(".pagination-nav"),title:document.querySelector(".exercises-main-title"),form:document.querySelector(".js-form")};let f=1;s.list.addEventListener("click",te);s.newList.innerHTML=z;I(s.list.dataset.filter,f).then(e=>{e.totalPages===1&&(s.pagination.style.display="none"),s.newList.innerHTML="",H(e.results);let t=v(e.totalPages,f);s.pagination.innerHTML=h(f,t),s.pagination.addEventListener("click",B)}).catch(e=>{console.error("Error: ",e),C.Notify.failure("Oops. Something went wrong. Try reloading the page")});function te(e){const t=e.target.dataset.category;e.target.classList.contains("exercises-filter-btn")&&([...e.currentTarget.children].forEach(r=>{r.children[0].classList.remove("active"),r.children[0].disabled=!1}),e.target.classList.add("active"),e.target.disabled=!0,s.title.textContent="Exercises",s.form.classList.add("is-hidden"),s.form.reset(),s.list.dataset.filter=t,I(t,f).then(r=>{r.totalPages<=1?s.pagination.style.display="none":s.pagination.style.display="block ",s.newList.innerHTML="",H(r.results);let n=v(r.totalPages,f);s.pagination.innerHTML=h(f,n),s.pagination.removeEventListener("click",U),s.pagination.addEventListener("click",B)}).catch(r=>{console.error("Error: ",r),C.Notify.failure("Oops. Something went wrong. Try reloading the page")}))}function B(e){let t=e.target.dataset.page;t==="..."||!e.target.classList.contains("js-page-link")||t===""||e.target.classList.contains("active")||(window.scrollTo({top:s.title.offsetTop-60}),t=Number(t),I(s.list.dataset.filter,t).then(r=>{H(r.results);let n=v(r.totalPages,t);s.pagination.innerHTML=h(t,n)}).catch(r=>{console.error("Error: ",r),C.Notify.failure("Oops. Something went wrong. Try reloading the page")}))}function H(e){Array.isArray(e)?(console.log(e),s.newList.innerHTML=ee(e)):console.error("Data is not an array:",e)}const k=document.querySelector(".js-form"),re=document.querySelector(".exercises-main-title"),A=document.querySelector(".exercises-filter-list"),d=document.querySelector(".list-for-new-exercises");document.querySelector(".js-filter-nav");const c=document.querySelector(".pagination-nav"),l={filter:"",category:"",keyword:""};let p=1;d.addEventListener("click",ne);function U(e){let t=e.target.dataset.page;t==="..."||!e.target.classList.contains("js-page-link")||e.target.classList.contains("active")||(window.scrollTo({top:d.offsetTop-210}),t=Number(t),F(l,t).then(r=>{d.innerHTML=N(r.results);let n=v(r.totalPages,t);c.innerHTML=h(t,n)}).catch(r=>{console.error(r),L.Notify.failure("Oops. Something went wrong. Try reloading the page")}))}function ne(e){e.target.classList.contains("js-item")&&(A.querySelector(".active").disabled=!1,d.innerHTML=z,$(),c.removeEventListener("click",B),c.addEventListener("click",U),l.filter=A.dataset.filter,l.category=e.target.closest(".js-category-item").dataset.category,k.classList.remove("is-hidden"),k.addEventListener("input",oe),F(l,p).then(t=>{t.totalPages<=1?c.style.display="none":c.style.display="block";const r=l.category[0].toUpperCase()+l.category.slice(1);d.innerHTML="",re.innerHTML=`Exercises / <span>${r}</span>`,d.innerHTML=N(t.results);let n=v(t.totalPages,p);c.innerHTML=h(p,n)}).catch(t=>{console.error(t),L.Notify.failure("Oops. Something went wrong. Try reloading the page")}))}const se=`
  <svg class="search-icon" width="26" height="26">
    <use href="${g}#icon-search"></use>
  </svg>
`,ie=`
  <svg class="clear-icon" width="18" height="18">
    <use href="${g}#icon-remove"></use>
  </svg>
`;function oe(e){const{input:t,button:r}=e.currentTarget.elements;t.value.length>0?(r.innerHTML=ie,r.addEventListener("click",$)):(r.removeEventListener("click",$),r.innerHTML=se);const n=t.value.replace(/\s{2,}/g," ");t.value=n,l.keyword=n,F(l,p).then(i=>{if(i.results.length===0){d.innerHTML='<p><b style="font-size: 28px">No matches found</b> <br>Please try another search</p>',c.innerHTML="";return}i.totalPages<=1?c.style.display="none":c.style.display="block",d.innerHTML=N(i.results);let m=v(i.totalPages,p);c.innerHTML=h(p,m)}).catch(i=>{console.error(i),L.Notify.failure("Oops. Something went wrong. Try reloading the page")}).finally(()=>{l.keyword=""})}function $(){k.reset();const e=new Event("input",{bubbles:!0,cancelable:!0});k.dispatchEvent(e)}const y=document.querySelector(".backdrop-ex"),ae=document.querySelector(".modal-close-btn"),b=document.querySelector(".modal-ex"),ce="favoriteExercises";ae.addEventListener("click",x);document.addEventListener("keydown",j);const D=document.querySelector(".rating-feedback-form");y.addEventListener("click",e=>{e.target===y&&x()});function le(){b&&(document.querySelector("body").style.overflow="hidden",b.classList.remove("is-hidden"),y.classList.remove("is-hidden"),document.addEventListener("keydown",j),b.addEventListener("click",e=>{e.stopPropagation()}),y.removeEventListener("click",x),K(a[0]._id))}function x(){b&&(document.querySelector("body").style.overflow="visible",b.classList.add("is-hidden"),document.removeEventListener("keydown",j),y.removeEventListener("click",x),y.classList.add("is-hidden"),D.classList.add("visually-hidden"),D.classList.remove("rating-form-active"))}function j(e){e.key==="Escape"&&x()}document.addEventListener("DOMContentLoaded",()=>{document.querySelector(".list-for-new-exercises").addEventListener("click",async t=>{const r=t.target.closest(".item-button");if(!r)return;let n=r.dataset.id;try{const i=await ue(n);i&&(a=i,K(a),le())}catch(i){console.log(i)}})});let G,a;function de(e){G=e}async function ue(e){const t=`https://your-energy.b.goit.study/api/exercises/${e}`;try{return a=[(await E.get(t)).data],de(e),me(a),ge(a),fe(a),pe(a),ye(a),ve(a),a}catch(r){console.log(r)}}function me(e){const t=document.querySelector(".modal-img");t.src=e[0].gifUrl}function ge(e){const t=document.querySelector(".ex-title");t.textContent=e[0].name}function fe(e){const t=document.querySelector(".ex-description");t.textContent=e[0].description}function pe(e){const t=document.querySelector(".ratinng-value");t.textContent=Number.isInteger(e[0].rating)?`${e[0].rating}.0`:e[0].rating}function ye(e){const t=document.querySelector(".info-list");t.innerHTML=e.map(r=>{const{bodyPart:n,burnedCalories:i,target:m,equipment:S,popularity:q,time:M}=r;return`
      <li class="info-item_info"><span>Target</span> <span class="info-item">${m}</span></li>
      <li class="info-item_info"><span>Body Part</span> <span class="info-item">${n}</span></li>
      <li class="info-item_info"><span>Equipment</span> <span class="info-item">${S}</span></li>
      <li class="info-item_info"><span>Popular</span> <span class="info-item">${q}</span></li>
      <li class="info-item_info"><span>Burned Calories</span> <span class="info-item">${i}/${M} min</span></li>
  `}).join("")}function ve(e){const t=parseFloat(e[0].rating),r=document.querySelectorAll(".modal-rating-star-icon");for(let n=0;n<r.length;n++)n<t?r[n].classList.add("active"):r[n].classList.remove("active")}function O(){return JSON.parse(localStorage.getItem("favoriteExercises"))||[]}function J(e){localStorage.setItem(ce,JSON.stringify(e))}function W(e){return O().some(n=>n===e)}function he(e){const t=O();t.push(e),J(t)}function be(e){const r=O().filter(n=>n!==e);J(r)}const w=document.querySelector(".btn-add-favorite");w.addEventListener("click",()=>{const e=a[0]._id;W(e)?(be(e),w.textContent="Add to favorite ♡"):(he(e),w.textContent="Remove from favorite 🗑")});function K(e){const t=W(e);w.textContent=t?"Remove from favorite 🗑":"Add to favorite ♡"}const o={closeBtn:document.querySelector(".close-rating-btn"),ratingStars:document.querySelector(".rating-stars"),ratingForm:document.querySelector(".rating-feedback-form"),stars:document.querySelectorAll(".star"),openModalBtn:document.querySelector(".btn-give-rating"),exerciseModal:document.querySelector(".modal-ex"),ratingNumber:document.querySelector(".rating-number")};o.closeBtn.addEventListener("click",R);o.ratingStars.addEventListener("change",Le);o.ratingForm.userEmail.addEventListener("input",Y);o.ratingForm.userEmail.addEventListener("change",e=>{Y(e)||X(e.currentTarget)});o.closeBtn.addEventListener("click",R);o.ratingForm.comment.addEventListener("change",xe);o.ratingForm.addEventListener("submit",Te);function Le(e){const t=e.currentTarget.firstElementChild;o.ratingNumber.textContent=e.target.value+".0",console.log(t),e.target.labels[0].children[0].classList.add("animate");const r=setTimeout(()=>{e.target.labels[0].children[0].classList.remove("animate"),clearTimeout(r)},1700)}function V(e){e.style.borderColor="#f4f4f4"}function X(e){e.classList.add("error"),setTimeout(()=>{e.classList.remove("error")},600)}function Ee(e){e.classList.add("form-error"),setTimeout(()=>{e.classList.remove("form-error")},800)}function Y(e){return/^(([^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@"]+\.)+[^<>()[\].,;:\s@"]{2,})$/iu.test(e.currentTarget.value)?(e.currentTarget.style.borderColor="#acdb9de5",!0):(e.currentTarget.style.borderColor="#bd7a7ae5",!1)}function xe(e){e.currentTarget.value.length<5?(e.currentTarget.style.borderColor="#bd7a7ae5",X(e.currentTarget)):e.currentTarget.style.borderColor="#acdb9de5"}function Se(e,t,r){return{rate:e,email:t,review:r}}function we(e,t){E.patch(`/exercises/${e}/rating`,t).then(r=>{T.Notify.success("Success"),R()}).catch(r=>{T.Notify.failure(r.response.data.message),Ee(o.ratingForm)})}function Te(e){if(e.preventDefault(),!e.currentTarget.elements.userEmail.validity.valid){T.Notify.failure("Check email");return}let t=document.querySelector('input[name="star"]:checked');if(t===null){T.Notify.failure("Please select rating stars");return}const r=Se(Number(t.value),e.currentTarget.elements.userEmail.value,e.currentTarget.elements.comment.value);we(G,r),V(e.currentTarget.elements.userEmail),V(e.currentTarget.elements.comment),o.ratingNumber.textContent="0.0",e.currentTarget.reset()}o.openModalBtn.addEventListener("click",ke);function ke(e){o.ratingForm.classList.remove("visually-hidden"),o.ratingForm.classList.add("rating-form-active"),o.exerciseModal.classList.add("is-hidden")}function R(){o.ratingForm.classList.add("visually-hidden"),o.ratingForm.classList.remove("rating-form-active"),o.exerciseModal.classList.remove("is-hidden")}const u={closeModalBtn:document.querySelector(".close-subscribe-btn"),backdrop:document.querySelector(".subscribe-backdrop"),modal:document.querySelector(".subscribe-backdrop"),body:document.body,form:document.querySelector(".subscribe-modal-form")};u.closeModalBtn.addEventListener("click",_);setTimeout(()=>{u.modal.classList.remove("hidden"),u.body.classList.add("no-scroll")},1e4);window.addEventListener("click",e=>{e.target===u.backdrop&&_()});window.addEventListener("keydown",e=>{e.key==="Escape"&&!u.modal.classList.contains("hidden")&&_()});function _(){u.modal.classList.add("hidden"),u.body.classList.remove("no-scroll")}u.form.addEventListener("submit",qe);function qe(e){e.preventDefault();const{email:t}=e.currentTarget.elements,r={email:t.value};Me(r).then(n=>{L.Notify.success(n.data.message)}).catch(n=>{L.Notify.failure(n.response.data.message)})}function Me(e){return E.post("/subscription",e)}
