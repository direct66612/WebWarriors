import{a as x,N as m}from"./exercises-aside-fe083c2a.js";const c=document.querySelector(".backdrop-ex"),M=document.querySelector(".modal-close-btn"),l=document.querySelector(".modal-ex"),R="favoriteExercises";M.addEventListener("click",d);document.addEventListener("keydown",g);const L=document.querySelector(".rating-feedback-form");c.addEventListener("click",e=>{e.target===c&&(d(),L.classList.add("is-hidden"))});function S(){l&&(document.querySelector("body").style.overflow="hidden",l.classList.remove("is-hidden"),c.classList.remove("is-hidden"),document.addEventListener("keydown",g),l.addEventListener("click",e=>{e.stopPropagation()}),c.removeEventListener("click",d),C(i))}function d(){l&&(document.querySelector("body").style.overflow="scroll",l.classList.add("is-hidden"),document.removeEventListener("keydown",g),c.removeEventListener("click",d),c.classList.add("is-hidden"),L.classList.add("is-hidden"))}function g(e){e.key==="Escape"&&d()}document.addEventListener("DOMContentLoaded",()=>{document.querySelector(".favorites-exercise-card-wrapper").addEventListener("click",async t=>{const r=t.target.closest(".exercise-card-start-btn");if(!r)return;let n=r.dataset.id;try{const o=await $(n);o&&(i=o,C(i),S())}catch(o){console.log(o)}})});let h,i;function w(e){h=e}async function $(e){const t=`https://your-energy.b.goit.study/api/exercises/${e}`;try{return i=[(await x.get(t)).data],w(e),A(i),O(i),P(i),_(i),D(i),J(i),i}catch(r){console.log(r)}}function A(e){const t=document.querySelector(".modal-img");t.src=e[0].gifUrl}function O(e){const t=document.querySelector(".ex-title");t.textContent=e[0].name}function P(e){const t=document.querySelector(".ex-description");t.textContent=e[0].description}function _(e){const t=document.querySelector(".ratinng-value");t.textContent=Number.isInteger(e[0].rating)?`${e[0].rating}.0`:e[0].rating}function D(e){const t=document.querySelector(".info-list");t.innerHTML=e.map(r=>{const{bodyPart:n,burnedCalories:o,target:E,equipment:f,popularity:N,time:B}=r;return`
      <li class="info-item_info"><span>Target</span> <span class="info-item">${E}</span></li>
      <li class="info-item_info"><span>Body Part</span> <span class="info-item">${n}</span></li>
      <li class="info-item_info"><span>Equipment</span> <span class="info-item">${f}</span></li>
      <li class="info-item_info"><span>Popular</span> <span class="info-item">${N}</span></li>
      <li class="info-item_info"><span>Burned Calories</span> <span class="info-item">${o}/${B} min</span></li>
  `}).join("")}function J(e){const t=parseFloat(e[0].rating),r=document.querySelectorAll(".modal-rating-star-icon");for(let n=0;n<r.length;n++)n<t?r[n].classList.add("active"):r[n].classList.remove("active")}function v(){return JSON.parse(localStorage.getItem("favoriteExercises"))||[]}function b(e){localStorage.setItem(R,JSON.stringify(e))}function q(e){return v().some(n=>n===e)}function V(e){const t=v();t.push(e),b(t)}function j(e){const r=v().filter(n=>n!==e);b(r)}const u=document.querySelector(".btn-add-favorite");u.addEventListener("click",()=>{const e=i[0]._id;q(e)?(j(e),u.textContent="Add to favorite â™¡"):(V(e),u.textContent="Remove from favorite ðŸ—‘")});function C(e){const t=q(e);u.textContent=t?"Remove from favorite ðŸ—‘":"Add to favorite â™¡"}const a=JSON.parse(localStorage.getItem("favoriteExercises")),F=document.querySelector(".favorites-not-found-text");a.length&&(F.style.display="none");a.length&&document.querySelector(".favorites-exercise-card-wrapper");if(a.length){let r=function(n){const o=n.target.closest(".favorites-exercise-card").dataset.id;a.forEach(E=>{t=a.findIndex(({_id:f})=>f===o)}),a.splice(t,1),localStorage.removeItem("favoriteExercises"),localStorage.setItem("favoriteExercises",JSON.stringify(a)),location.reload()};document.querySelectorAll(".exercise-card-remove-btn").forEach(n=>{n.addEventListener("click",r)});let t}a.length||(F.style.display="block");const G=document.querySelectorAll("[data-modal-open]");G.forEach(e=>{e.addEventListener("click",S)});const s={closeBtn:document.querySelector(".close-rating-btn"),ratingStars:document.querySelector(".rating-stars"),ratingForm:document.querySelector(".rating-feedback-form"),stars:document.querySelectorAll(".star"),openModalBtn:document.querySelector(".btn-give-rating"),exerciseModal:document.querySelector(".modal-ex"),ratingNumber:document.querySelector(".rating-number")};s.closeBtn.addEventListener("click",p);s.ratingStars.addEventListener("change",K);s.ratingForm.userEmail.addEventListener("input",I);s.ratingForm.userEmail.addEventListener("change",e=>{I(e)||T(e.currentTarget)});s.closeBtn.addEventListener("click",p);s.ratingForm.comment.addEventListener("change",H);s.ratingForm.addEventListener("submit",z);function K(e){const t=e.currentTarget.firstElementChild;t.textContent=e.target.value+".0",e.target.labels[0].children[0].classList.add("animate"),k(s.stars),X(e.target.value,s.stars);const r=setTimeout(()=>{e.target.labels[0].children[0].classList.remove("animate"),clearTimeout(r)},1700)}function y(e){e.style.borderColor="#f4f4f4"}function k(e){for(let t=0;t<5;t+=1)e[t].classList.remove("star-active")}function X(e,t){for(let r=0;r<e;r+=1)t[r].classList.add("star-active")}function T(e){e.classList.add("error"),setTimeout(()=>{e.classList.remove("error")},600)}function I(e){return/^(([^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@"]+\.)+[^<>()[\].,;:\s@"]{2,})$/iu.test(e.currentTarget.value)?(e.currentTarget.style.borderColor="#acdb9de5",!0):(e.currentTarget.style.borderColor="#bd7a7ae5",!1)}function H(e){e.currentTarget.value.length<5?(e.currentTarget.style.borderColor="#bd7a7ae5",T(e.currentTarget)):e.currentTarget.style.borderColor="#acdb9de5"}function U(e,t,r){return{rate:e,email:t,review:r}}function Y(e,t){x.patch(`/exercises/${e}/rating`,t).then(r=>{m.Notify.success("Success")}).catch(r=>{m.Notify.failure(r.response.data.message)})}function z(e){if(e.preventDefault(),!e.currentTarget.elements.userEmail.validity.valid){m.Notify.failure("Check email");return}let t=document.querySelector('input[name="star"]:checked');if(t===null){m.Notify.failure("Please select rating stars");return}const r=U(Number(t.value),e.currentTarget.elements.userEmail.value,e.currentTarget.elements.comment.value);Y(h,r),y(e.currentTarget.elements.userEmail),y(e.currentTarget.elements.comment),k(s.stars),s.ratingNumber.textContent="0.0",e.currentTarget.reset(),p()}s.openModalBtn.addEventListener("click",Q);function Q(e){s.ratingForm.classList.remove("is-hidden"),s.exerciseModal.classList.add("is-hidden")}function p(){s.ratingForm.classList.add("is-hidden"),s.exerciseModal.classList.remove("is-hidden")}
