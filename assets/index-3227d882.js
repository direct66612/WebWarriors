import{a as S,s as E,r as p,b as y,c as q,n as P,N as w}from"./pagination-markup-c9829de1.js";document.addEventListener("DOMContentLoaded",function(){document.getElementById("logo-link").addEventListener("click",function(){window.location.href="./index.html"}),document.getElementById("subscription-form").addEventListener("submit",function(e){e.preventDefault();const t=document.getElementById("email-input"),s=t.value;if(console.log(s),!t.checkValidity()){alert("https://your-energy.b.goit.study/api/subscription");return}fetch("https://your-energy.b.goit.study/api/subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s})}).then(n=>n.json()).then(n=>{if(console.log(n.message),n.message==="Service not found")throw Error("Request error. Please try again later.");alert("You have successfully subscribed to receive new exercises!"),t.value=""}).catch(n=>{alert(n)})})});let I=document.querySelector(".top-button");window.onscroll=function(){Y()};function Y(){document.body.scrollTop>200||document.documentElement.scrollTop>200?I.style.display="block":I.style.display="none"}I.addEventListener("click",Q);function Q(){window.scrollTo({top:0,behavior:"smooth"})}async function M(e,t=1){let{filter:s="",category:n="",keyword:i=""}=e;switch(s){case"Body parts":s="bodypart";break;case"Muscles":s="muscles";break;case"Equipment":s="equipment";break}const d=new URLSearchParams({[s]:n,keyword:i,page:t,limit:window.innerWidth<768?8:10});return(await S.get("/exercises",{params:d})).data}function C(e){return e.map(t=>{const{rating:s,name:n,burnedCalories:i,time:d,bodyPart:L,target:k,_id:T}=t;return`
      <li class="item">
        <div class="item-header">
          <span class='item-workout'>Workout</span>
          <p class='item-rating js-rating'>${Number.isInteger(s)?`${s}.0`:s}</p>
          <svg class="rating-star" width="18" height="18">
            <use href="${E}#icon-exercises-content-gold-star"></use>
          </svg>
        </div>

        <div class="item-body">
          <svg class="" width="24" height="24">
            <use href="${E}#icon-running-man"></use>
          </svg>
          <h3 class="item-title js-item-title">${n}</h3>
        </div>

        <div class='item-footer'>
          <p>Burned calories: <span>${i} / ${d} min</span></p>
          <p>Body part: <span class="capitalize">${L}</span></p>
          <p>Target: <span class="capitalize">${k}</span></p>
        </div>

        <button class='item-button' data-id=${T} data-modal-open>Start
          <svg class="start-icon" width="16" height="16">
            <use href="${E}#icon-scroll-arrow"></use>
          </svg>
        </button>
      </li>
    `}).join("")}async function $(e,t){const n=new URLSearchParams({filter:e,page:t,limit:window.innerWidth<768?9:12});return await S.get("/filters",{params:n}).then(i=>i.data)}function Z(e){return e.map(({filter:t,name:s,imgURL:n})=>`
        <li class = "new-exercises-item">  
          <div class = "exercises-filter-IMG js-category-item js-item" style="
          background: linear-gradient(0deg, rgba(17, 17, 17, 0.50) 0%, rgba(17, 17, 17, 0.50) 100%), url('${n}'), lightgray -19.24px -11px / 112.354% 111.111% no-repeat; background-size: contain; background-size: cover;" data-category="${s}">
            <div class="container-for-h2-and-p-card">
              <h3 class="exercises-title-of-item js-item">${s}</h3>
              <p class="exercises-text-of-item js-item">${t}</p>
            </div>              
          </div>            
        </li>`).join("")}const A=`
  <div class="loader">
    <svg class="" width="24" height="24">
      <use href="${E}#icon-aside-barbell"></use>
    </svg>
  </div>
`;window.addEventListener("load",()=>{r.bodyPartsItem.style.color="black"});const r={list:document.querySelector(".exercises-filter-list"),newList:document.querySelector(".list-for-new-exercises"),bodyPartsItem:document.querySelector(".filter-of-body-parts"),musclesItem:document.querySelector(".filter-of-muscles"),equipmentItem:document.querySelector(".filter-of-equipment"),pagination:document.querySelector(".pagination-nav"),title:document.querySelector(".exercises-main-title"),form:document.querySelector(".js-form")};let u=1;r.list.addEventListener("click",ee);r.newList.innerHTML=A;$(r.list.dataset.filter,u).then(e=>{r.newList.innerHTML="",j(e.results);let t=p(e.totalPages,u);r.pagination.innerHTML=y(u,t),r.pagination.addEventListener("click",F)}).catch(e=>{console.error("Error: ",e),q.Notify.failure("Oops. Something went wrong. Try reloading the page")});function ee(e){const t=e.target.dataset.category;e.target.classList.contains("exercises-filter-btn")&&(r.title.textContent="Exercise",r.form.classList.add("is-hidden"),r.list.dataset.filter=t,$(t,u).then(s=>{j(s.results);let n=p(s.totalPages,u);r.pagination.innerHTML=y(u,n),r.pagination.removeEventListener("click",D),r.pagination.addEventListener("click",F)}).catch(s=>{console.error("Error: ",s),q.Notify.failure("Oops. Something went wrong. Try reloading the page")}))}function F(e){let t=e.target.dataset.page;t==="..."||!e.target.classList.contains("js-page-link")||t===""||e.target.classList.contains("active")||(window.scrollTo({top:r.title.offsetTop-60}),t=Number(t),$(r.list.dataset.filter,t).then(s=>{j(s.results);let n=p(s.totalPages,t);r.pagination.innerHTML=y(t,n)}).catch(s=>{console.error("Error: ",s),q.Notify.failure("Oops. Something went wrong. Try reloading the page")}))}function N(){r.bodyPartsItem.classList.contains("active")&&(r.bodyPartsItem.classList.remove("active"),r.bodyPartsItem.style.color="#24242499"),r.musclesItem.classList.contains("active")&&(r.musclesItem.classList.remove("active"),r.musclesItem.style.color="#24242499"),r.equipmentItem.classList.contains("active")&&(r.equipmentItem.classList.remove("active"),r.equipmentItem.style.color="#24242499")}r.bodyPartsItem.addEventListener("click",()=>{N(),r.bodyPartsItem.classList.add("active"),r.bodyPartsItem.style.color="black",r.bodyPartsItem.disabled=!0,r.musclesItem.disabled=!1,r.equipmentItem.disabled=!1});r.musclesItem.addEventListener("click",()=>{N(),r.musclesItem.classList.add("active"),r.musclesItem.style.color="black",r.bodyPartsItem.style.color="#24242499",r.bodyPartsItem.disabled=!1,r.musclesItem.disabled=!0,r.equipmentItem.disabled=!1});r.equipmentItem.addEventListener("click",()=>{N(),r.equipmentItem.classList.add("active"),r.equipmentItem.style.color="black",r.bodyPartsItem.style.color="#24242499",r.bodyPartsItem.disabled=!1,r.musclesItem.disabled=!1,r.equipmentItem.disabled=!0});function j(e){Array.isArray(e)?r.newList.innerHTML=Z(e):console.error("Data is not an array:",e)}const v=document.querySelector(".js-form"),te=document.querySelector(".exercises-main-title"),se=document.querySelector(".exercises-filter-list"),l=document.querySelector(".list-for-new-exercises");document.querySelector(".js-filter-nav");const m=document.querySelector(".pagination-nav"),c={filter:"",category:"",keyword:""};let g=1;l.addEventListener("click",re);function D(e){let t=e.target.dataset.page;t==="..."||!e.target.classList.contains("js-page-link")||e.target.classList.contains("active")||(window.scrollTo({top:l.offsetTop-210}),t=Number(t),M(c,t).then(s=>{l.innerHTML=C(s.results);let n=p(s.totalPages,t);m.innerHTML=y(t,n)}).catch(s=>{console.error(s),P.Notify.failure("Oops. Something went wrong. Try reloading the page")}))}function re(e){e.target.classList.contains("js-item")&&(l.innerHTML=A,v.reset(),m.removeEventListener("click",F),m.addEventListener("click",D),c.filter=se.dataset.filter,c.category=e.target.closest(".js-category-item").dataset.category,v.classList.remove("is-hidden"),v.addEventListener("input",ae),M(c,g).then(t=>{l.innerHTML="";const s=c.category[0].toUpperCase()+c.category.slice(1);te.innerHTML=`Exercises / <span>${s}</span>`,l.innerHTML=C(t.results);let n=p(t.totalPages,g);m.innerHTML=y(g,n)}).catch(t=>{console.error(t),P.Notify.failure("Oops. Something went wrong. Try reloading the page")}))}const ne=`
  <svg class="search-icon" width="26" height="26">
    <use href="../img/symbol-defs.svg#icon-search"></use>
  </svg>
`,ie=`
  <svg class="clear-icon" width="18" height="18">
    <use href="../img/symbol-defs.svg#icon-remove"></use>
  </svg>
`;function ae(e){const{input:t,button:s}=e.currentTarget.elements;t.value.length>0?(s.innerHTML=ie,s.addEventListener("click",R)):(s.removeEventListener("click",R),s.innerHTML=ne);const n=t.value.replace(/\s{2,}/g," ");t.value=n,c.keyword=n,M(c,g).then(i=>{if(i.results.length===0){l.innerHTML='<p><b style="font-size: 28px">No matches found</b> <br>Please try another search</p>',m.innerHTML="";return}l.innerHTML=C(i.results);let d=p(i.totalPages,g);m.innerHTML=y(g,d)}).catch(i=>{console.error(i),P.Notify.failure("Oops. Something went wrong. Try reloading the page")}).finally(()=>{c.keyword=""})}function R(){v.reset();const e=new Event("input",{bubbles:!0,cancelable:!0});v.dispatchEvent(e)}const f=document.querySelector(".backdrop-ex"),oe=document.querySelector(".modal-close-btn"),h=document.querySelector(".modal-ex"),ce="favoriteExercises";oe.addEventListener("click",b);document.addEventListener("keydown",B);const V=document.querySelector(".rating-feedback-form");f.addEventListener("click",e=>{e.target===f&&(b(),V.classList.add("is-hidden"))});function le(){h&&(document.querySelector("body").style.overflow="hidden",h.classList.remove("is-hidden"),f.classList.remove("is-hidden"),document.addEventListener("keydown",B),h.addEventListener("click",e=>{e.stopPropagation()}),f.removeEventListener("click",b),J(o))}function b(){h&&(document.querySelector("body").style.overflow="scroll",h.classList.add("is-hidden"),document.removeEventListener("keydown",B),f.removeEventListener("click",b),f.classList.add("is-hidden"),V.classList.add("is-hidden"))}function B(e){e.key==="Escape"&&b()}document.addEventListener("DOMContentLoaded",()=>{document.querySelector(".list-for-new-exercises").addEventListener("click",async t=>{const s=t.target.closest(".item-button");if(!s)return;let n=s.dataset.id;try{const i=await ue(n);i&&(o=i,J(o),le())}catch(i){console.log(i)}})});let z,o;function de(e){z=e}async function ue(e){const t=`https://your-energy.b.goit.study/api/exercises/${e}`;try{return o=[(await S.get(t)).data],de(e),me(o),ge(o),fe(o),pe(o),ye(o),ve(o),o}catch(s){console.log(s)}}function me(e){const t=document.querySelector(".modal-img");t.src=e[0].gifUrl}function ge(e){const t=document.querySelector(".ex-title");t.textContent=e[0].name}function fe(e){const t=document.querySelector(".ex-description");t.textContent=e[0].description}function pe(e){const t=document.querySelector(".ratinng-value");t.textContent=Number.isInteger(e[0].rating)?`${e[0].rating}.0`:e[0].rating}function ye(e){const t=document.querySelector(".info-list");t.innerHTML=e.map(s=>{const{bodyPart:n,burnedCalories:i,target:d,equipment:L,popularity:k,time:T}=s;return`
      <li class="info-item_info"><span>Target</span> <span class="info-item">${d}</span></li>
      <li class="info-item_info"><span>Body Part</span> <span class="info-item">${n}</span></li>
      <li class="info-item_info"><span>Equipment</span> <span class="info-item">${L}</span></li>
      <li class="info-item_info"><span>Popular</span> <span class="info-item">${k}</span></li>
      <li class="info-item_info"><span>Burned Calories</span> <span class="info-item">${i}/${T} min</span></li>
  `}).join("")}function ve(e){const t=parseFloat(e[0].rating),s=document.querySelectorAll(".modal-rating-star-icon");for(let n=0;n<s.length;n++)n<t?s[n].classList.add("active"):s[n].classList.remove("active")}function H(){return JSON.parse(localStorage.getItem("favoriteExercises"))||[]}function U(e){localStorage.setItem(ce,JSON.stringify(e))}function G(e){return H().some(n=>n===e)}function he(e){const t=H();t.push(e),U(t)}function be(e){const s=H().filter(n=>n!==e);U(s)}const x=document.querySelector(".btn-add-favorite");x.addEventListener("click",()=>{const e=o[0]._id;G(e)?(be(e),x.textContent="Add to favorite ♡"):(he(e),x.textContent="Remove from favorite 🗑")});function J(e){const t=G(e);x.textContent=t?"Remove from favorite 🗑":"Add to favorite ♡"}const a={closeBtn:document.querySelector(".close-rating-btn"),ratingStars:document.querySelector(".rating-stars"),ratingForm:document.querySelector(".rating-feedback-form"),stars:document.querySelectorAll(".star"),openModalBtn:document.querySelector(".btn-give-rating"),exerciseModal:document.querySelector(".modal-ex"),ratingNumber:document.querySelector(".rating-number")};a.closeBtn.addEventListener("click",O);a.ratingStars.addEventListener("change",Le);a.ratingForm.userEmail.addEventListener("input",X);a.ratingForm.userEmail.addEventListener("change",e=>{X(e)||K(e.currentTarget)});a.closeBtn.addEventListener("click",O);a.ratingForm.comment.addEventListener("change",xe);a.ratingForm.addEventListener("submit",ke);function Le(e){const t=e.currentTarget.firstElementChild;t.textContent=e.target.value+".0",e.target.labels[0].children[0].classList.add("animate"),W(a.stars),Ee(e.target.value,a.stars);const s=setTimeout(()=>{e.target.labels[0].children[0].classList.remove("animate"),clearTimeout(s)},1700)}function _(e){e.style.borderColor="#f4f4f4"}function W(e){for(let t=0;t<5;t+=1)e[t].classList.remove("star-active")}function Ee(e,t){for(let s=0;s<e;s+=1)t[s].classList.add("star-active")}function K(e){e.classList.add("error"),setTimeout(()=>{e.classList.remove("error")},600)}function X(e){return/^(([^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@"]+\.)+[^<>()[\].,;:\s@"]{2,})$/iu.test(e.currentTarget.value)?(e.currentTarget.style.borderColor="#acdb9de5",!0):(e.currentTarget.style.borderColor="#bd7a7ae5",!1)}function xe(e){e.currentTarget.value.length<5?(e.currentTarget.style.borderColor="#bd7a7ae5",K(e.currentTarget)):e.currentTarget.style.borderColor="#acdb9de5"}function we(e,t,s){return{rate:e,email:t,review:s}}function Se(e,t){S.patch(`/exercises/${e}/rating`,t).then(s=>{w.Notify.success("Success")}).catch(s=>{w.Notify.failure(s.response.data.message)})}function ke(e){if(e.preventDefault(),!e.currentTarget.elements.userEmail.validity.valid){w.Notify.failure("Check email");return}let t=document.querySelector('input[name="star"]:checked');if(t===null){w.Notify.failure("Please select rating stars");return}const s=we(Number(t.value),e.currentTarget.elements.userEmail.value,e.currentTarget.elements.comment.value);Se(z,s),_(e.currentTarget.elements.userEmail),_(e.currentTarget.elements.comment),W(a.stars),a.ratingNumber.textContent="0.0",e.currentTarget.reset(),O()}a.openModalBtn.addEventListener("click",Te);function Te(e){a.ratingForm.classList.remove("is-hidden"),a.exerciseModal.classList.add("is-hidden")}function O(){a.ratingForm.classList.add("is-hidden"),a.exerciseModal.classList.remove("is-hidden")}
